<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fantastic Control</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-size: 100%;
      }
      body.mobile-ui {
        font-size: 75%;
      }
      section {
        position: relative;
        width: 100%;
      }
      #page1 {
        color: white;
        background-color: black;
        user-select: none;
      }
      #model {
        position: absolute;
        left: 50%;
        top: 10%;
        max-width: 75%;
        max-height: 50%;
        transform: translateX(-50%);
      }
      #title {
        position: absolute;
        margin: 0;
        left: 40%;
        bottom: 30%;
        font-weight: normal;
        font-size: 400%;
        transform: translateX(-50%);
      }
      #desp {
        position: absolute;
        left: 65%;
        bottom: 20%;
        font-size: 400%;
        transform: translateX(-50%);
      }
      #arrow {
        position: absolute;
        left: 50%;
        width: 10%;
        max-width: 50px;
        transform: translateX(-50%);
        animation: arrow 4s ease-in-out infinite;
      }
      @keyframes arrow {
        0% {
          bottom: 10%;
        }
        50% {
          bottom: 5%;
        }
        100% {
          bottom: 10%;
        }
      }
    </style>
    <script>
      window.$ready = function (func) { // Initialize
        if (document.readyState != "loading") func();
        else document.addEventListener("DOMContentLoaded", func);
      };
      $ready(() => { // Resizing
        const resizeHandle = (() => {
          Array.prototype.slice.call(
            document.querySelectorAll("body > section")
          ).forEach((ele) => (ele.style.height = `${window.innerHeight}px`));
          if (window.innerWidth <= 800)
            document.body.classList.add("mobile-ui");
          else
            document.body.classList.remove("mobile-ui");
        });
        resizeHandle();
        window.addEventListener("resize", resizeHandle);
      });
      $ready(() => { // Scrolling Animation
        const speed = 10;
        let scrolling = 0;
        let pos = Math.round(document.body.scrollTop / window.innerHeight);
        document.addEventListener("scroll", () => {
          if (scrolling != 0) return;
          scrolling = 1 - pos * 2; // 0 => 1, 1 => -1;
          document.body.scrollTop += scrolling * speed;
          const timer = setInterval(() => {
            const diff = document.body.scrollTop % window.innerHeight;
            if (Math.min(diff, window.innerHeight - diff) >= speed)
              return (document.body.scrollTop += scrolling * speed);
            pos = Math.round(document.body.scrollTop / window.innerHeight);
            document.body.scrollTop = pos * window.innerHeight;
            clearInterval(timer);
            setTimeout(() => (scrolling = 0), 50);
          }, 5);
        });
      });
    </script>
  </head>
  <body>
    <section id="page1" data-pageid="1">
      <img src="img/model.png" id="model" />
      <h1 id="title">DRONE V1.0</h1>
      <span id="desp">在此</span>
      <img src="img/arrow.png" id="arrow" />
    </section>
    <section id="page2" data-pageid="2">
    </section>
  </body>
</html>
